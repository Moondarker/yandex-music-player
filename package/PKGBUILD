# Maintainer: phpusr
pkgname=yandex-music-player
pkgver=1.0.0
pkgrel=1
pkgdesc='Yandex.Music Player'
arch=('x86_64')
url='https://github.com/phpusr/yandex-music-player'
license=('GPL')
depends=('electron')
makedepends=('npm')
provides=('yandex-music-player')
source_x86_64=(
  "master.zip::https://github.com/phpusr/yandex-music-player/archive/master.zip"
)
source=(
  "ymp.desktop"
  "ymp.sh"
)
sha1sums=('8ea55a3b9562281ed17d70adf2204be0b2fc84cf'
          'a10d6976131fa866a68366c5ce2e74542f54c86e')
sha1sums_x86_64=('a7efd50b1f8d036c0fd1a2fc7ccffaef350f6b39')

package() {
  cd "$srcdir/yandex-music-player-master"

  export NODE_ENV=production
  npm install

  # Install app resources
  find . -type f -exec install -Dm644 {} "$pkgdir/usr/share/ymp/{}" \;

  # Install bin
  install -Dm755 "$srcdir/ymp.sh" "$pkgdir/usr/bin/ymp"

  # Install desktop
  install -Dm755 "$srcdir/ymp.desktop" "$pkgdir/usr/share/applications/ymp.desktop"
}
